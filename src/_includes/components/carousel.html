<section id="{{ include.id | default: 'pageCarousel' }}"
  class="carousel slide {{ include.style | default: '' }} {{ include.theme | default: '' }}"
  data-ride="carousel">
  <!-- TODO: Refactor indicators -->
  <ol class="carousel-indicators d-none">
    {% for slug in include.items %}
    <li data-target="#{{ include.id | default: 'pageCarousel' }}" data-slide-to="{{ forloop.index0 }}"
      {% if forloop.first %}class="active" {% endif %}></li>
    {% endfor %}
  </ol>
  <div class="carousel-inner">
    {% for slug in include.items %}
      <!-- This logic assumes that all collection instances have a title attribute -->
      {% if slug.title %}
        {% assign item = slug %}
      {% else %}
        {% assign item = site[include.collection] | where: 'slug', slug | first %}
      {% endif %}

      {% if item %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <!-- Logic: carousel will support several possible layout values. [two-column, split, hero, etc] -->
          {% include components/{{ include.layout | default: "two-column" }}.html
            label=include.label
            item=item
          %}
        </div>
      {% endif %}
    {% endfor %}

    {% if include.items.size > 1 %}
      <a class="carousel-control-prev" href="#{{ include.id | default: 'pageCarousel' }}" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#{{ include.id | default: 'pageCarousel' }}" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    {% endif %}
  </div>
</section>