---
layout: default
title: Policy Tool
permalink: /policy-tool
slug: policy-tool
---
<script src="http://d3js.org/d3.v3.min.js"></script>

<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div id="map"></div>
      <select name="" id="state-select">
        <option value="#">Select State</option>
        {% for state in site.states %}
          <option value="{{ state.url }}">{{ state.name }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
</div>

<script>
  $('#state-select').change(function(){
    var value = $(this).val();
    window.console.log('value', value);
    var url = $(this).val(); // get selected value
      if (url) { // require a URL
          window.location = url; // redirect
      }
      return false;
  });
</script>

<script type="text/javascript">

  /*  This visualization was made possible by modifying code provided by:

  Scott Murray, Choropleth example from "Interactive Data Visualization for the Web" 
  https://github.com/alignedleft/d3-book/blob/master/chapter_12/05_choropleth.html   
      
  Malcolm Maclean, tooltips example tutorial
  http://www.d3noob.org/2013/01/adding-tooltips-to-d3js-graph.html

  Mike Bostock, Pie Chart Legend
  http://bl.ocks.org/mbostock/3888852  */

      
  //Width and height of map
  var width = 960;
  var height = 500;

  // D3 Projection
  var projection = d3.geo.albersUsa()
             .translate([width/2, height/2])    // translate to center of screen
             .scale([1000]);          // scale things down so see entire US
          
  // Define path generator
  var path = d3.geo.path()               // path generator that will convert GeoJSON to SVG paths
           .projection(projection);  // tell path generator to use albersUsa projection

  //Create SVG element and append map to the SVG
  var svg = d3.select("#map")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

  // Append Div for tooltip to SVG
  var tip = d3.select("#map")
          .append("span")   
          .attr("class", "map-tooltip")               
          .style("opacity", 0);      

  // Load GeoJSON data and merge with states data
  d3.json("/data/us-states.json", function(json) {
    // Bind the data to the SVG and create one path per GeoJSON feature
    svg.selectAll("path")
    .data(json.features)
    .enter()
    .append("path")
    .attr("d", path)
    .style("stroke", "#fff")
    .style("stroke-width", "1")  
    .style("fill", "rgb(42,129,117)")
    .on("mouseover", function(d) {    
       //  tip.transition()        
       // .duration(200)      
       // .style("opacity", .9);      
       // tip.text(d.properties.name)
       // .style("left", (d3.event.pageX) + "px")     
       // .style("top", (d3.event.pageY - 10) + "px");
       window.console.log("hover", d);
       d3.select(this).style("opacity", .9); 
    }) 
    .on("mouseout", function(d) {       
      d3.select(this).style("opacity", 1);    
    });
  });
</script>